# (15)VPCの構築

## 本章の目的：

- VPCやサブネットとは何かを学ぶ。
- VPCとインターネットとの接続方法を学ぶ。

***

通常ネットワークは、複数の単位に分割されます。それらをサブネットといいます。サブネットにもセキュリティ要件上いろいろあり、インターネットから接続できるもの、できないものとさまざまです。

本章では、VPC(Virtual Private Cloud)やサブネットとは何か、どうやってAWSでそれらを実装するのかを学びます。

### 1. 今回構築するVPCの構成

まずはじめに、今回構築するVPCの全容をご確認ください。

＜図１：VPCの全体像＞

この全体像をもとに、VPCやサブネットとは何かを解説します。

#### 1-1. サブネット

サブネットとは、ネットワークの単位です。例えば企業では普通は部署が複数集まって構成されています。その部署ごとにPCの台数も異なるしセキュリティポリシーも違います。よって全てを一つのネットワークにまとめるのは無理があるのです。

そうはいっても今回の構成はサブネット1つ、EC2が2つという超簡単な構成なのでありがたみが感じられません。それもその通りで、応用編まで進んでようやくありがたみを感じることができます。今のところはとりあえずこのレベルで理解すれば十分です。

サブネットはPCやサーバと同じく、IPアドレスを持ちます。

#### 1-2. VPC

VPCは、仮想ネットワークです。こういってしまえばそれまでですが、ここではネットワーク全体と理解してください。最初にVPCを作り、その中に要件に従ったサブネットを順次構築していきます。

今回はVPCとインターネットをゲートウェイを介して接続するので、VPCの外側はインターネット、ということになります。

またVPCはAWSアカウント間で独立しています。

#### 1-3. CIDR

先ほど1-1にて、サブネットごとにアドレスを持つと解説しました。

＜図２：CIDR表記の説明＞

#### 1-4. インターネットゲートウェイ


### 2. VPCやサブネットの実装

ではこれより、実際にVPCやサブネットを実装していきましょう。もうここからはルートアカウントで作業せず、IAMで作った神アカウント「Administrator」でログインしてください。

コンソールよりVPCのサービスを開いてください。ここで再度、東京リージョンが選択されていることを確認しておきましょう。上図の赤枠の部分です。

＜図３：VPCサービスを開く＞

「VPCを作成する」ボタンをクリックしてください。

＜図４：ステップ１ VPC設定の選択＞

「選択する」ボタンをクリックしてください。

＜図５：ステップ２ 1個のパブリックサブネットを持つVPC＞

VPC名とサブネット名はわかりやすい名前なら結構ですが、もしうまくいかない時に質問を投稿することを考えて、できるだけ同じ内容を入力してください。入力し終えたら「VPCの作成」ボタンをクリックしてください。

＜図６：VPC作成完了＞

ほんの数秒後にはできました。左側のメニューに沿って順番に確認していきましょう。メニューの「VPC」をクリックしてください。

＜図７：VPC＞

できてますね。あと同様に、サブネットやインターネットゲートウェイも先にあげた全体像と見比べて確認しておいてください。

### まとめ

意外なほどに簡単にVPCとサブネットができたこと、体感していただけたでしょうか？次はいよいよVPC内にEC2インスタンスを立ち上げて、そこへ接続するまでを解説します。

