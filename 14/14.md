# (14)IAMを使ったアクセス管理 

## 本章の目的：

- セキュリティポリシーを設計する。
- IAMを使ったセキュリティポリシーを実装する。

***

誰が何をできるかを設定することをセキュリティポリシーと呼ぶ、ということはすでに解説しました。今回はより深くセキュリティポリシーを考えて、それをAWSのサービスであるAWS IAMにより実装しましょう。

### 1. セキュリティポリシーとはをもう一度

このコースを受講の方は、コースの教材通りに学習してきたとすれば、ユーザ登録した時に取得したアカウント、つまりメールアドレスでログインしているはずです。これはルートユーザーという神アカウントであり、AWSでできることイコールあなたができること、なのです。

AWS的には、IAMで管理ユーザを作成して使用し、ルートユーザのアクセスキーをロックすることを推奨しています。

本コースでもそれにならい、IAMで管理ユーザを作ります。ルートユーザのロックは、本コースでは扱いません。みなさんがWebサイトを一般公開する時に実施してください。その頃にはAWSにすっかり慣れて、自分で調べて対応できるようになっているはずです。

ここでもう一度、セキュリティポリシーを定義しておきましょう。

・管理者

ルートユーザに匹敵する、最強神ユーザです。ほぼ何でもできます。もちろんそれはあ・な・た、ただ一人です。AWS的にはルートユーザを日常的に使うことを推奨していません。神アカウントは最終奥義にとっておき、通常はIAMのアカウントでログインしてください、というのがAWSの推奨です。

・一般ユーザ

将来的にあなたのサイトの規模が大きくなり、外部から来た人に操作してもらうことを想定しています。当初は一人管理者兼一般ユーザ状態だとしても、ゆくゆくはそのような対応を考えなくてはいけません。使う・使わないはさておいて、今の段階で作っておきましょう。

また、インスタンス丸ごと削除といった、管理者であるあなたですら滅多にやらないことはできなくしてしまいます。よってあなたが操作するときも一般ユーザでログインして、誤まって重大な操作をしてしまわないように、という牽制の意味もあります。

上記2つはグループという単位で定義します。よって、新たに参画する時は、アカウント登録してそれに対してグループを付与する、という流れです。一人一人にできることすべてを付与する必要はないということに注意してください。

・ロール

上記２つは人に付与するものですが、人以外に付与する場合は、ユーザではなくロールを付与します。ここで、パラダイムシフトが必要になります。

ユーザは生身の人間１人格あたりに付与するものですので、理解するのも簡単です。ではサーバは？サーバがサーバにログインする、つまりサーバAがサーバBにログインする場合、BにはAのためのアカウントが必要です。アカウントは人間のためだけではないのです。

では、ユーザをはじめとしてAWSのリソースをアカウント登録するのかというとそうではなく、人ではないリソースには、ロールというものを付与します。

ここでまとめましょう。

＜図：セキュリティポリシー＞

では、AWSで実装していきます。意外と簡単です。














