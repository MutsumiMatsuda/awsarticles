# (11) まとめ（Linux編)

## 本章の目的：

- 今までに、そしてこれから必要となるLinuxの知識を習得する。

***


本章では、前章までに出てきたLinuxの知識、そして今後必要となるLinuxの知識を解説します。Linuxを全く知らない方向けに書いていますので、肩の力を抜いてお読み下さい。

※本章に手を動かす場面はありますが、読み物風にしました。最初は読むだけでも十分です。

前章まででLinuxという単語をひんぱんに使ってきましたが、LinuxはおろかOSとは何かからピンとこない方もおられるはずです。ここではパソコンをさわったことくらいはある程度の方を対象に、今後の章に進む上で必要になる知識を解説します。

開発経験がない方なら知らない方が普通なことばかりですので、安心して下さい。ただし今後アプリを開発して公開する上で、これらは避けて通れない話です。よって、急いで先に進むより、ちょっと立ち止まって整理しておきましょう。

## 1. OSとは一体何者か？

コンピュータは、本来手のかかるものです。自分から自発的に何かをしてくれる何か仕事をさせるなら、その全てを指示しなければいけません。例えばAというキーを押せばAと表示される、それだけでもコンピュータは指示なしではやってくれません。

でも・・・私たちはそんなことを意識せずコンピュータを使っています。というのも、Aと押せばAと解釈してくれる、そんなことはどんなアプリでも共通だからです。そう、Microsoft Officeであっても、メモ帳であっても、Atomなどのテキストエディタであっても、です。

こういった「コンピュータならばやってくれる当たり前の仕事」を受け持つのが、オペレーティングシステムです。OSの仕事は以下です。学校で習う5大機能ですね。

・入力  
・出力  
・記憶  
・演算  
・制御  

これらはOSがやってくれるから、1 + 1というプログラムを書くと2という値が画面に表示されるわけです。我々は電気信号やビット演算という複雑なことを意識しなくてもよいのです。

ちなみに今はあまり聞かなくなりましたが、OS(オペレーティングシステム)は基本ソフトウェアとも呼ばれていました。OSが基本的なことをやってくれているから基本ソフトウェア、です。

＜図：OSが基本的なことをやってくれている（箇条書き）＞

OSとは何かがおぼろげに分かったでしょうか？私たちとハードウェアの間に入ってくれているもの、または用途に依存しないコンピュータの基本動作をやってくれているもの、といえます。

### 1-1. OSにもいろいろある

OSはいろいろと種類があります。パソコンの世界で有名なものは以下です。

・Windows  
・Mac OS  

スマホだってOSが頑張っています。

・Android  
・iOS  

サーバー用OSもさまざまです。

・Linux (CentOSやUbuntu、RedHatなど)  
・Windows Server  

サーバインスタンスを作成するときの画面をもう一度見てみましょう。

＜図：インスタンスのOSを選択する画面＞

ここでは何を選んでいたか、もうお分かりですね。そうです、サーバのOSを選んでいたわけです。

本コースでは、CentOSを採用します。

## 2. Linuxを使う

LinuxというOSについて、今後必要となる知識をもう少し深掘りしましょう。本コースでアプリを載せるサーバはCentOS、つまりLinuxで構築します。ではそのLinuxとは何か、普段使っているWindowsやMacOSとの違いは何かについて見てみましょう。

### 2-1. Linuxとはコマンドライン操作が基本

WindowsやMacOSでは、デスクトップ上にファイルやフォルダがあり、それをマウスやトラックパッドでダブルクリックして開いたり実行するのが基本です。

ですが、Linuxではアイコンやフォルダはすぐには見えず（※注意１）、黒い画面でコマンドを叩くしかありません。

＜図：LinuxとWindowsの違い＞

Linuxではフォルダを開くのもコマンド入力＋Enter、何かを実行するのもコマンド入力＋Enter、つまりダブルクリックや右クリックの操作は全てコマンド入力＋Enterなのです。

アイコンやデスクトップ画面といった視覚的に操作できることをGUI（グラフィカル・ユーザ・インターフェース）といい、コマンドベースの操作をCUI(コマンド・ユーザ・インターフェース）といいます。

### 2-2. PCで行う操作をLinuxで考える

では、フォルダをダブルクリックする、ファイルを削除するといったことをLinuxでコマンド操作することを考えましょう。


＜表：GUIで行う操作をCUIで実行してみる>

フォルダ：ディレクトリ
今開いているフォルダ：カレントディレクトリ
フォルダを開ける：ls
フォルダを移動する：cd
フォルダを作る：mkdir
ファイルを消す：rm

いかがでしょうか？慣れると映画に出てくるハッカーのごとくバチバチとキーを打ち、さっそうと操作できるようになりますよ。

### 2-3. 権限とパーミッションについて

みなさんがお使いのPCのように、OSは複数のユーザを管理できます。Linuxも当然可能です。

ユーザはグループ単位で管理できます。例えばファイルAは特定ユーザのみ開ける、またはグループAに属するユーザなら開ける、または管理者権限を有するユーザのみ開けるといった、細かな制御が可能です。もちろんフォルダにも権限を付与できます。これをパーミッションといいます。

パーミッション、すでに前章で出てきましたが覚えていますか？

```-rw-r--r--@   1 (PC名)  staff       1696  9 24 13:19 (キーペア名).pem```

この```-rw-r--r--```がパーミッションを表現したものです。先頭のハイフンはのぞいて、

・最初の3桁が管理者ができること
・次の3桁が同一グループのユーザができること
・次の3桁がそのファイルの所有者ができること

となります。

＜図：パーミッション（3桁区切り）＞

3桁の内訳を、管理者権限を例にとり見てみましょう。

・最初の1桁が参照権限（中身を見られる）
・次の1桁が編集権限
・最後の1桁が実行権限
・ハイフンはその行為ができない

＜図：パーミッション（3桁の内訳）＞

ということです。実行権限とは、ファイルがWindowsでいうところのexeファイルだったら、それを実行できるかどうかだと考えてください。よって、管理者権限の3桁である```-rw-```は、

・参照可能
・編集可能
・実行不可能

を表します。なんでもあり権限は```rwx```です。というわけでもう一度。

```-rw-r--r--```

・管理者権限を持つユーザは参照と編集が可能。
・同一グループのユーザは参照のみ。
・所有者は参照のみ。

を表します。

### 2-3. パーミッションでちょっと算数

前章では権限の変更をする時、```chmod 400 ファイル名```としましたよね。この400って何でしょう？

chmodはパーミッションの変更コマンドです。本来ならビット演算という数学チックな話になりますが、それはみなさんの嫌いなところですので以下のように考えてください。

・rは4
・wは2
・xは1

つまり権限を400に変更する```chmod 400 ファイル名```というコマンドは、管理者権限を有するユーザのみ参照だけできるように、それ以外のユーザは何もできないように変更するという意味になります。

では誰でも何でもできるように変更したい場合、どうすればよいか分かりますか？以下のようになります。

```chmod 777 ファイル名```

例をもう一つ。管理者権限を持つユーザのみフル権限、それ以外のユーザは読み込み＆編集というのは？

```chmod 755 ファイル名```

となります。

## 3.まとめ

本章ではLinuxについて軽く触れました。

Linuxとは本来相当奥が深いもので、それだけで本1冊書けます。本章では次の章へ進むのに必要な内容だけに絞って説明しました。

今後Linuxについて深く知りたい場合、以下をオススメしておきます。

https://linuc.org/textbooks/linux/

LPI JapanというLinux認定試験「Linuc」を主催する団体のホームページです。そのLPI Japanが公開しているLinuxの標準教科書です。

Linuxの最低限の知識を得たところで、次の章へ進みましょう。次はネットワークやAWSそのものについてです。





＜あらすじ＞

H2タイトル：OSからAMIへ

そもそもOSとは何か。  
　  Windows/Mac/Linux、AndroidやiOSもOSの仲間  
Webサイト構築では、一般的にLinuxを利用する。  
Linuxにはディストリビューションがある。  
　  Ubuntu/Cent/Redhat・・・前章ではAmazon Linuxを利用  
　  本コースでは、CentOSを利用する。  
Amazonでは、AMIというものがある。  
　  もう一度コンソール画面を参照する。  
　  LinuxごとにAMI IDが振られている  
　  メーカーが有償で販売しているものもあれば、コミュニティで公開しているものがある  
マシンイメージを取得する。  
　  マシンイメージとは  
　  マシンイメージからサーバーを量産可能  


H2タイトル：Linuxとは  
  
Linuxとは、コマンドライン操作が基本  
　  操作はすべて手打ち  
　  右クリックはありえない  
　  電源OFFすらコマンド  
ディレクトリとフォルダ  
　  ディレクトリとフォルダはなにが違うか  
　  　  ディレクトリとフォルダの対比  
　  　  カレントディレクトリとは何か  
　  　  ディレクトリを変更する  
　Windowsにもあるコマンドライン（コマンドプロンプト）  
　Linuxのコマンドライン操作のキホン  
　  WindowsでLinuxコマンド操作をしてみよう！  
　  　  GitBashのインストール。  
　  　  GitBashの動作確認。  
　  カレントディレクトリの確認。  
　  カレントディレクトリの変更。  
　  ディレクトリ作成。  
　  ファイル作成。  
　Linuxのアカウント体系  
　  Linuxの神様「root」  
　  root以外のアカウント  
　  root権限で実行「sudo」  
　  ファイル、ディレクトリごとの権限の確認（パーミッション）  
　  パーミッションの見方  
　  権限を変更する「chmod」  
　Linux操作の終了        

H2タイトル：クラウドとレンタルサーバの違い  
　  レンタルサーバとは何か  
　  クラウドにできて、レンタルサーバにできないこと  


